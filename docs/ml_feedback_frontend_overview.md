# Manual Priority Feedback & ML Log UI Overview

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ—è—Å–Ω—é—î, —â–æ —Å–∞–º–µ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –∑–±–æ—Ä—É —Ä—É—á–Ω–æ–≥–æ —Ñ—ñ–¥–±–µ–∫—É –ø–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É —Ç—ñ–∫–µ—Ç—ñ–≤ —ñ —è–∫ –æ–Ω–æ–≤–ª–µ–Ω–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, —â–æ–± –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –±–∞—á–∏–ª–∏ –∂—É—Ä–Ω–∞–ª–∏ ML/LLM.

## 1. –ó–º—ñ–Ω–∏ –±–µ–∫–µ–Ω–¥—É

### 1.1 –ó–±–∞–≥–∞—á–µ–Ω–Ω—è ML-–ø—Ä–æ–≥–Ω–æ–∑—ñ–≤ LLM-–¥–∞–Ω–∏–º–∏
- `app/services/ml_service.py` —Ç–µ–ø–µ—Ä –≤–∏—Ç—è–≥—É—î –Ω–µ –ª–∏—à–µ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –≤—ñ–¥ –∫–ª–∞—Å–∏—á–Ω–æ—ó ML-–º–æ–¥–µ–ª—ñ, –∞ –π –ø–æ–≤–µ—Ä—Ç–∞—î **–ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é LLM —Ç–∞ —ó—ó –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å** (`priority_llm_suggested`, `priority_llm_confidence`).
- –Ø–∫—â–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ ML —ñ LLM –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è –∞–±–æ –æ–±–∏–¥–≤—ñ –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ –Ω–∏–∂—á—ñ –∑–∞ –ø–æ—Ä—ñ–≥, —Å–µ—Ä–≤—ñ—Å –≤–∏—Å—Ç–∞–≤–ª—è—î `triage_required` –∑ –ø—Ä–∏—á–∏–Ω–æ—é `LLM_PRIORITY_MISMATCH`. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ç—ñ–∫–µ—Ç –Ω–∞ —Ä—É—á–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥, –Ω–∞–≤—ñ—Ç—å –∫–æ–ª–∏ –æ–±–∏–¥–≤–∞ —Å–µ—Ä–≤—ñ—Å–∏ –ø—Ä–∞—Ü—é—é—Ç—å, –∞–ª–µ –Ω–µ –¥–æ–≤—ñ—Ä—è—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.
- –£—Å—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏ –ª–æ–≥—É—é—Ç—å—Å—è –≤ `MLPredictionLog`, –≤–∫–ª—é—á–Ω–æ –∑ LLM-–ø–æ–ª—è–º–∏, —â–æ–± —ó—Ö –º–æ–∂–Ω–∞ –±—É–ª–æ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ.

### 1.2 –§—ñ–∫—Å–∞—Ü—ñ—è —Ä—É—á–Ω–æ–≥–æ —Ñ—ñ–¥–±–µ–∫—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
- –ë—É–¥—å-—è–∫–∞ —Ä—É—á–Ω–∞ –∑–º—ñ–Ω–∞ `priority_manual` —á–µ—Ä–µ–∑ `TicketService.update_ticket` –∞–±–æ –ø—ñ–¥ —á–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç—Ä—ñ–∞–∂—É (`resolve_triage`) –≤–∏–º–∞–≥–∞—î **–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ—ó –ø—Ä–∏—á–∏–Ω–∏**.
- –£ `_record_priority_feedback` –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç, –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–µ–∫—Å—Ç –ø—Ä–∏—á–∏–Ω–∏, –∞–≤—Ç–æ—Ä –∑–º—ñ–Ω–∏ —Ç–∞ —á–∞—Å –∑–∞–ø–∏—Å—É. –¶—ñ –ø–æ–ª—è –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –ª–æ–≥—É –≤ `MLPredictionLog`, —â–æ–± –ø—Ä–∏–≤ º—è–∑–∞—Ç–∏ —Ñ—ñ–¥–±–µ–∫ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑—É.
- –ü—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó —Ä—É—á–Ω–æ—ó –∑–º—ñ–Ω–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `training_feedback_service.export_priority_feedback_dataset`, —è–∫–∏–π —Ñ–æ—Ä–º—É—î CSV —É `training/data/priority_feedback.csv`. –¶–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –¥–æ–Ω–∞–≤—á–∞–Ω–Ω—è –º–æ–¥–µ–ª–µ–π.

### 1.3 API –¥–ª—è –∂—É—Ä–Ω–∞–ª—ñ–≤ ML/LLM
- –ù–æ–≤–∏–π —Ä–æ—É—Ç–µ—Ä `app/routers/ml_logs.py` –≤—ñ–¥–∫—Ä–∏–≤–∞—î `GET /ml/logs`, –¥–æ—Å—Ç—É–ø–Ω–∏–π –ª–∏—à–µ LEAD/ADMIN.
- –ï–Ω–¥–ø–æ—ñ–Ω—Ç –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–æ–∑—à–∏—Ä–µ–Ω—É —Å—Ö–µ–º—É `MLPredictionLogOut` (–¥–∏–≤. `app/schemas/ml.py`) –∑ –ø–æ–ª—è–º–∏ –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤ ML/LLM, —Ä—É—á–Ω–æ–≥–æ —Ñ—ñ–¥–±–µ–∫—É —Ç–∞ –ø—Ä–∏—á–∏–Ω–∏ —Ç—Ä—ñ–∞–∂—É.

## 2. –ó–º—ñ–Ω–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

### 2.1 –ù–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ ¬´ML Logs¬ª
- –§–∞–π–ª `frontend/ml-logs.html` –º—ñ—Å—Ç–∏—Ç—å –æ–∫—Ä–µ–º—É –∞–¥–º—ñ–Ω-—Å—Ç–æ—Ä—ñ–Ω–∫—É –∑—ñ —Å–ø–∏—Å–∫–æ–º –∂—É—Ä–Ω–∞–ª—ñ–≤.
- –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ–∫–∞–∑—É—î:
  - –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç—ñ–∫–µ—Ç —Ç–∞ –π–æ–≥–æ –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å;
  - –ª—ñ–Ω—ñ–π–∫—É ¬´ML ‚ûú LLM ‚ûú Final¬ª, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏ –π –∫—ñ–Ω—Ü–µ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è;
  - –ø–æ–¥–≤—ñ–π–Ω–∏–π –±–ª–æ–∫ —ñ–∑ –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è ML —Ç–∞ LLM;
  - —Ç–µ–∫—Å—Ç —Ä—É—á–Ω–æ–≥–æ —Ñ—ñ–¥–±–µ–∫—É —Ç–∞ –∞–≤—Ç–æ—Ä–∞, —è–∫–∏–π –≤–Ω—ñ—Å –∑–º—ñ–Ω—É;
  - –ø—Ä–∏—á–∏–Ω—É —Ç—Ä—ñ–∞–∂—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `LLM_PRIORITY_MISMATCH`).
- –£–≥–æ—Ä—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è –±–∞–∑–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏: –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤, —Å–∫—ñ–ª—å–∫–∏ —Ä—É—á–Ω–∏—Ö –∫–æ—Ä–µ–∫—Ü—ñ–π –∑—Ä–æ–±–ª–µ–Ω–æ, —Å–∫—ñ–ª—å–∫–∏ –±—É–ª–æ —Ä–æ–∑–±—ñ–∂–Ω–æ—Å—Ç–µ–π ML/LLM —Ç–∞ –∫–æ–ª–∏ –≤–æ—Å—Ç–∞–Ω–Ω—î –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–ª–∏—à–∞–≤ —Ñ—ñ–¥–±–µ–∫.
- –î–æ—Å—Ç—É–ø–Ω—ñ –ø—Ä–æ—Å—Ç—ñ —Ñ—ñ–ª—å—Ç—Ä–∏: –∑–∞ `ticket_id` —ñ –ª—ñ–º—ñ—Ç–æ–º –∑–∞–ø–∏—Å—ñ–≤. –ö–Ω–æ–ø–∫–∞ ¬´üîÑ –û–Ω–æ–≤–∏—Ç–∏¬ª –ø—ñ–¥—Ç—è–≥—É—î –¥–∞–Ω—ñ –ø–æ–≤—Ç–æ—Ä–Ω–æ.

### 2.2 –û–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó —Ç–∞ API –∫–ª—ñ—î–Ω—Ç—ñ–≤
- `frontend/dashboard.html`, `frontend/board.html`, `frontend/tickets.html` –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω–æ–≤—É —Å—Ç–æ—Ä—ñ–Ω–∫—É ¬´ML Logs¬ª, —â–æ–± –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –º–æ–≥–ª–∏ —à–≤–∏–¥–∫–æ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –∂—É—Ä–Ω–∞–ª—ñ–≤.
- JS-–∫–ª—ñ—î–Ω—Ç–∏ `frontend/js/api.js` —Ç–∞ `frontend/js/api.v2.js` –¥–æ–¥–∞–ª–∏ –º–µ—Ç–æ–¥ `getMlLogs`, —è–∫–∏–π –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É –π –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–∏, –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.
- –£ —Ñ–æ—Ä–º–∞—Ö –∑–º—ñ–Ω–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É —Ç–µ–ø–µ—Ä –∑–∞–ø–∏—Ç—É—î—Ç—å—Å—è –æ–±–æ–≤ º—è–∑–∫–æ–≤–µ –ø–æ–ª–µ –∑ –ø—Ä–∏—á–∏–Ω–æ—é, –ø–µ—Ä—à –Ω—ñ–∂ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ PATCH-–∑–∞–ø–∏—Ç (–¥–∏–≤. –º–æ–¥–∞–ª—å–Ω—ñ –≤ `frontend/board.html` —Ç–∞ `frontend/tickets.html`).

## 3. –ü–æ—Ç—ñ–∫ –Ω–∞–≤—á–∞–ª—å–Ω–æ—ó –ø–µ—Ç–ª—ñ
1. ML/LLM —Ä–æ–±–ª—è—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ ‚Äî `MLPredictionLog` –∑–±–µ—Ä—ñ–≥–∞—î –æ–±–∏–¥–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –π –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Å–∏.
2. –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑–º—ñ–Ω—é—î –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç, –≤—ñ–Ω –∑–æ–±–æ–≤ º—è–∑–∞–Ω–∏–π –≤–∫–∞–∑–∞—Ç–∏ –ø—Ä–∏—á–∏–Ω—É. –§—ñ–¥–±–µ–∫ –ª–æ–≥—É—î—Ç—å—Å—è —Ä–∞–∑–æ–º —ñ–∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.
3. `training_feedback_service.export_priority_feedback_dataset` –¥–æ–¥–∞—î –∑–∞–ø–∏—Å –¥–æ CSV, —è–∫–∏–π –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è —Ä–µ—Ç—Ä–µ–π–Ω—ñ–Ω–≥—É ML –∞–±–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤ LLM.
4. –ê–Ω–∞–ª—ñ—Ç–∏–∫–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å `ml-logs.html`, —â–æ–± –±–∞—á–∏—Ç–∏ —Ö—Ä–æ–Ω–æ–ª–æ–≥—ñ—é –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤, —Ä—É—á–Ω—ñ –≤—Ç—Ä—É—á–∞–Ω–Ω—è —Ç–∞ –ø—Ä–∏—á–∏–Ω–∏ —Ç—Ä—ñ–∞–∂—É ‚Äî —É—Å–µ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ.

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ª–∏—à–µ —Ñ—ñ–∫—Å—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è, –∞ –π –∑–±–∏—Ä–∞—î –∑–Ω–∞–Ω–Ω—è –≤—ñ–¥ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –ø—Ä–æ–∑–æ—Ä—É —ñ—Å—Ç–æ—Ä—ñ—é –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è ML —Ç–∞ –∫–æ—Ä–∏–≥—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–∞–∑–æ–∫ LLM.
